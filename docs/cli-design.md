# Cli Design

命令行交互接口设计方案，假设我们目前的可执行文件名为`calc`。

目前我们的输入形式包括表达式(Expression)和语句(Sentence)，前者会产生结果，而后者只用于赋值。

## 错误处理

### 1. 单条表达式输入情况
对于可能出现的错误内容:
1. 内容不全如 
```bash
calc -e "1+"
```
2. 同时注意运算符之间需要保留一个空格（12月13日出现的神奇bug之一）

### 2. 文件输入
与单条不同之处在于出现了赋值语句
比如

```bash
a = 1
b = 3
a + b

```

## 交互方式

用于在本程序中，只有表达式会产生结果，而语句只包含赋值操作。从严格意义上讲，我们只应该输出表达式的计算结果，而对于语句来说，应该返回错误（未输入表达式）或不予理睬，当然也可以返回赋值结果。

> 在实现上，请选择上述的任何一种方式来实现，但是请保证整个程序的处理方式统一。

> 当前输入数字为使用latex形式，并且有规划好情况


### 1. 单条表达式输入

直接在执行程序时携带表达式，程序可以直接计算并显示结果。值得注意的是，在输入时需要使用双引号包括，保证表达式不可分。

> 在具体实现上，可以自行设计提示词`[ouput]`

````bash
$ calc -e "1 + 1"
$ [output] 2
````



#### 能否添加功能：
手动加入错误提醒？（哪个部分出错，进行提示）


### 2. 进入交互模式，多行表达式输入

除了上述通过文件进行多行输入的方法，我们还应该提供一个交互接口，能够让用户通过交互的方式进行多行输入。

>该模式中所有的赋值语句的值都会保留到退出交互模式，直到遇到表达式
>遇到表达式之后会直接输出结果，




```
$ calc -i
> 1 + 1
2
> a = 2
> a + 1
3
```


### 3. 文件输入

选择输入文件路径，程序来读取文件中的内容并且进行运行输出
读取到文件的结尾然后结束，之后内容包括销毁之前的资源

文件路径为相对路径
>输入文件后进入文件处理模式，这时候只能输入s,r等，类似gdb来进行一句一句的调试

通过输入文件路径，程序会逐行读取文件中的内容，并解析运行。在文件中，可能会出现多条表达式，你都需要将结果输出出来。

```bash
$ calc -p text.calc
```


## 错误提示

请尽量处理掉任何可能会出现`panic!`的情况，需要捕获可能会出现错误（文件读取错误，解析错误，计算错误等），并进行提示。



